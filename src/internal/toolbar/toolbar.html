<html>
  <head>
    <title>Jsenv toolbar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="icon" href="data:," />
    <link rel="stylesheet" type="text/css" href="./toolbar.main.css" />
  </head>
  <body>
    <div id="toolbar-overlay"></div>
    <!-- toolbar -->
    <div id="toolbar">
      <div id="toolbar-wrapper">
        <section id="file-list-link" data-responsive-toolbar-element>
          <a class="toolbar-icon-wrapper" href="">
            <svg id="fileIconSvg" class="iconToolbar" viewBox="0 0 24 24" width="35" height="35">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"
              />
            </svg>
          </a>
        </section>

        <section id="file">
          <input type="text" id="file-input" value="" dir="rtl" tabindex="-1" readonly />
        </section>

        <section id="execution-indicator">
          <div data-when="execution:default">
            <div class="tooltip">Unknown state</div>
          </div>
          <div data-when="execution:running">
            <div class="tooltip">Executing...</div>
            <button>
              <svg id="loader-icon" data-animate>
                <use xlink:href="./toolbar-loading-icon.svg#toolbar-loading-icon"></use>
              </svg>
            </button>
          </div>
          <div data-when="execution:completed">
            <div class="tooltip">Execution completed in X ms</div>
            <button>
              <svg id="check-icon" data-animate viewBox="0 0 52 52">
                <path fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
              </svg>
            </button>
          </div>
          <div data-when="execution:errored">
            <div class="tooltip">Execution failed in X ms</div>
            <button>
              <svg id="cross-icon" data-animate viewBox="0 0 512 512">
                <rect
                  id="cross_p1"
                  x="239.397"
                  y="67.518"
                  rx="17"
                  ry="17"
                  transform="matrix(0.7071 0.7071 -0.7071 0.7071 255.9995 -106.0389)"
                />
                <rect
                  id="cross_p2"
                  x="239.397"
                  y="67.519"
                  rx="17"
                  ry="17"
                  transform="matrix(0.7071 -0.7071 0.7071 0.7071 -106.039 256.0001)"
                />
              </svg>
            </button>
          </div>
        </section>

        <div style="width: 100%"></div>

        <section id="eventsource-indicator" data-responsive-toolbar-element>
          <div data-when="eventsource:default">
            <div class="tooltip">Unknown state</div>
            <button>
              <svg>
                <circle class="eventsource-circle" cx="20" cy="20" r="5" />
              </svg>
            </button>
          </div>
          <div data-when="eventsource:connecting">
            <div class="tooltip">
              Connecting to server...
              <br />
              <div class="tooltipAction">
                <a href="javascript:void(0);">
                  <svg id="powerOffIconSvg" class="tooltipIcon">
                    <use
                      xlink:href="./eventsource/toolbar-power-off-icon.svg#toolbar-power-off-icon"
                    ></use>
                  </svg>
                  cancel
                </a>
              </div>
            </div>
            <button>
              <svg>
                <circle
                  class="eventsource-circle"
                  data-variant="connecting"
                  cx="20"
                  cy="20"
                  r="5"
                />
                <circle class="eventsource-ring" cx="20" cy="20" r="13" />
              </svg>
            </button>
          </div>
          <div data-when="eventsource:failed">
            <div class="tooltip">
              Cannot connect to server
              <br />
              <div class="tooltipAction">
                <a href="javascript:void(0);">
                  <svg id="powerIconSvg" class="tooltipIcon">
                    <use xlink:href="./eventsource/toolbar-power-icon.svg#toolbar-power-icon"></use>
                  </svg>
                  retry
                </a>
              </div>
            </div>
            <button>
              <svg>
                <circle class="eventsource-circle" data-variant="failed" cx="20" cy="20" r="5" />
              </svg>
            </button>
          </div>
          <div data-when="eventsource:connected">
            <div class="tooltip">
              Connected to server
              <br />
              Livereload: <span data-when="livereload:on" style="color: green">ON</span
              ><span data-when="livereload:off" style="color: grey">OFF</span>
              <br />
              Changes:
              <span data-when="changes:yes"
                ><a
                  class="eventsource-changes-link"
                  style="color: inherit"
                  href="javascript:void(0);"
                  >X</a
                ></span
              ><span data-when="changes:no">none</span>
              <div data-when="changes:yes">
                <br />
                <a class="eventsource-reload-link" style="color: inherit" href="javascript:void(0);"
                  >reload</a
                >
              </div>
            </div>
            <button>
              <div data-when="livereload:on">
                <svg class="event-source-livereload iconToolbar" data-variant="enabled">
                  <use xlink:href="./toolbar-loading-icon.svg#toolbar-loading-icon"></use>
                </svg>
              </div>
              <div data-when="changes:yes">
                <svg class="event-source-livereload iconToolbar" data-variant="disabled">
                  <use xlink:href="./toolbar-loading-icon.svg#toolbar-loading-icon"></use>
                </svg>
              </div>
              <svg class="event-source-icon">
                <circle class="eventsource-circle" data-variant="connected" cx="20" cy="20" r="5" />
              </svg>
            </button>
          </div>
          <div data-when="eventsource:disabled">
            <div class="tooltip">
              Disconnected from server
              <br />
              <div class="tooltipAction">
                <a href="javascript:void(0);">
                  <svg id="powerIconSvg" class="tooltipIcon">
                    <use xlink:href="./eventsource/toolbar-power-icon.svg#toolbar-power-icon"></use>
                  </svg>
                  connect
                </a>
              </div>
            </div>
            <button>
              <svg>
                <circle class="eventsource-circle" data-variant="off" cx="20" cy="20" r="5" />
              </svg>
            </button>
          </div>
        </section>

        <section id="settings" data-responsive-toolbar-element>
          <div id="settings-box">
            <div id="settings-box-header">
              <button id="button-close-settings">
                <svg id="crossIconSvg" class="" width="18px" height="18px">
                  <use xlink:href="./toolbar-cross-icon.svg#toolbar-cross-icon"></use>
                </svg>
              </button>
              <svg class="settings-icon" width="35px" height="35px">
                <use xlink:href="./settings/toolbar-settings-icon.svg#toolbar-settings-icon"></use>
              </svg>
              <h3>Settings</h3>
            </div>
            <div id="settings-box-body">
              <div class="settings-box-item">
                <div class="category-title">
                  <svg width="20px" height="20px">
                    <use xlink:href="./toolbar-notif-icon.svg#toolbar-notif-icon"></use>
                  </svg>
                  Notifications
                </div>
                <label class="switch" data-contains-hidden-input>
                  <input id="toggle-notifs" type="checkbox" />
                  <div>
                    <div class="slider"></div>
                    <div class="square"></div>
                  </div>
                </label>
                <div class="category-subtitle">
                  Send system notification when execution fails or is fixed.
                </div>
              </div>
              <div class="settings-box-item settings-livereload">
                <div class="category-title">
                  <svg width="20px" height="20px">
                    <use xlink:href="./toolbar-loading-icon.svg#toolbar-loading-icon"></use>
                  </svg>
                  <span>Livereload</span>
                </div>
                <label class="switch" data-contains-hidden-input>
                  <input id="toggle-livereload" type="checkbox" />
                  <div>
                    <div class="slider"></div>
                    <div class="square"></div>
                  </div>
                </label>
                <div class="category-subtitle">
                  Reload page when a file is modified, deleted or created.
                </div>
              </div>
              <div class="settings-box-item">
                <div class="category-title">
                  <svg width="20px" height="20px">
                    <use xlink:href="./animation/toolbar-movie-icon.svg#toolbar-movie-icon"></use>
                  </svg>
                  Animations
                </div>
                <label class="switch" data-contains-hidden-input>
                  <input id="toggle-anims" type="checkbox" />
                  <div>
                    <div class="slider"></div>
                    <div class="square"></div>
                  </div>
                </label>
                <div class="category-subtitle">Play toolbar animations and transitions.</div>
              </div>
              <div class="settings-box-item">
                <div class="category-title">
                  <svg width="20px" height="20px" id="paletteIconSvg">
                    <use xlink:href="./theme/toolbar-palette-icon.svg#toolbar-palette-icon"></use>
                  </svg>
                  Dark mode
                </div>
                <label class="switch" data-contains-hidden-input>
                  <input id="checkbox-dark-theme" type="checkbox" />
                  <div>
                    <div class="slider"></div>
                    <div class="square"></div>
                  </div>
                </label>
              </div>
              <div id="compilation_info" class="settings-box-item">
                <div class="category-title">
                  <svg id="compilationSvg" width="20px" height="20px">
                    <use xlink:href="./compilation/info.svg#icon"></use>
                  </svg>
                  Compiled or not?
                </div>
                <div class="category-subtitle">
                  <div data-when="compileInfo:pending">...</div>
                  <div data-when="compileInfo:source_and_compilation_is_optional">
                    <ul>
                      <li>Source files are used</li>
                      <li>Compilation is optional <span class="emoji">❤️</span></li>
                    </ul>
                    <a class="go_to_compiled_link" href="javascript:void(0);"
                      >Go to compiled files</a
                    >
                  </div>
                  <div data-when="compileInfo:compiled_and_compilation_is_optional">
                    <ul>
                      <li>The files shown are compiled</li>
                      <li>Compilation is optional <span class="emoji">❤️</span></li>
                    </ul>
                    <a class="go_to_source_link" href="javascript:void(0);"
                      >Go to source files (not compiled)</a
                    >
                  </div>
                  <div data-when="compileInfo:source_and_compilation_is_required">
                    <ul>
                      <li>Source files are used</li>
                      <li>
                        Compilation is
                        <a class="required_reasons_link" href="javascript:void(0);">required</a>
                      </li>
                    </ul>
                    <a class="go_to_compiled_link" href="javascript:void(0);"
                      >Go to compiled file</a
                    >
                  </div>
                  <div data-when="compileInfo:compiled_and_compilation_is_required">
                    <ul>
                      <li>The files shown are compiled</li>
                      <li>
                        Compilation is
                        <a class="required_reasons_link" href="javascript:void(0);">required</a>
                      </li>
                    </ul>
                    <a class="go_to_source_link" href="javascript:void(0);"
                      >Go to source files (not compiled)</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button id="settings-button" class="toolbar-icon-wrapper">
            <svg class="settings-icon iconToolbar" class="iconToolbar" width="35px" height="35px">
              <use xlink:href="./settings/toolbar-settings-icon.svg#toolbar-settings-icon"></use>
            </svg>
          </button>
        </section>

        <section id="close" data-responsive-toolbar-element>
          <button id="button-close-toolbar">
            <div class="toolbar-icon-wrapper">
              <svg id="crossIconSvg" class="iconToolbar" width="35px" height="35px">
                <use xlink:href="./toolbar-cross-icon.svg#toolbar-cross-icon"></use>
              </svg>
            </div>
          </button>
        </section>
      </div>

      <div id="overflow-menu">
        <div style="width: 100%"></div>
      </div>

      <div id="overflow-menu-button">
        <button class="toolbar-icon-wrapper">
          <svg id="dotsIconSvg" class="iconToolbar" width="35px" height="35px">
            <use xlink:href="./responsive/toolbar-dots-icon.svg#toolbar-dots-icon"></use>
          </svg>
        </button>
      </div>
    </div>

    <!-- svg filter
    must not be hidden or won't show in firefox)
    see also:
      https://codepen.io/tigt/post/fixing-the-white-glow-in-the-css-blur-filter
      https://stackoverflow.com/questions/46906819/edge-detection-in-svg-filter
      https://github.com/msurguy/background-blur/issues/5
      https://tympanus.net/codrops/2019/01/22/svg-filter-effects-outline-text-with-femorphology/
    -->
    <svg width="0" height="0">
      <defs>
        <filter id="better-blur" x="0" y="0" width="1" height="1">
          <feGaussianBlur stdDeviation="5" result="blurred" />

          <feMerge>
            <feMergeNode in="SourceGraphic" />
            <feMergeNode in="blurred" />
          </feMerge>
        </filter>
      </defs>
    </svg>

    <!--
    <script type="module" src="./toolbar.main.js"></script>
    The script type module approach works too but
    is slower than having a prebuilt file.
    Because this will impact every page using jsenv let's
    use the fatest solution for now.
    The day browser support import maps the script
    module approach wil be faster because
    no compilation will be necessary
    -->
    <script src="/.jsenv/toolbar.main.js"></script>
  </body>
</html>
